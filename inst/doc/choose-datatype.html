<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Choosing a clifro datatype}
-->

<h1>Introduction</h1>

<p>The <code>cf_datatype</code> function is all that is required to select <code>clifro</code> datatypes.
This function can be called without any arguments that takes the user through
interactive menus, otherwise the datatypes may be chosen programatically if the 
menu options are known in advance. Whether the intention is to choose one 
datatype or many, this vignette details the various methods in choosing them.</p>

<h1>Using the menus interactively to choose a datatype</h1>

<p>Those familiar with the cliflo <a href="http://cliflo.niwa.co.nz/pls/niwp/wgenf.choose_datatype?cat=cat1">datatype selection menu</a>
will recall the myriad datatypes and options available in the National Climate 
Database. Selection of a datatype requires navigation through trees of menus,
check boxes and combo boxes. The <code>cf_datatype</code> function mimics this (tedious)
behaviour by default, i.e. when no arguments are passed to the function and the
datatypes, menus and options are all identical to (actually scraped from) 
the datatype selection menu.</p>

<h2>A minimal example</h2>

<p>Let&#39;s say the datatype we are interested in is 9am surface wind in knots.</p>

<pre><code class="r">surfaceWind.dt = cf_datatype()

# If you prefer pointing and clicking - turn the graphics option on:
surfaceWind.dt = cf_datatype(graphics = TRUE)
</code></pre>

<h3>Daily and Hourly Observations</h3>

<pre><code>## Daily and Hourly Observations
## 
## 1: Combined Observations
## 2: Wind
## 3: Precipitation
## 4: Temperature and Humidity
## 5: Sunshine and Radiation
## 6: Weather
## 7: Pressure
## 8: Clouds
## 9: Evaporation / soil moisture
</code></pre>

<p>The first menu that appears when the above line of code is run in R is the 
&#39;Daily and Hourly Observations&#39;. We are interested in &#39;Wind&#39;, therefore we 
would type in the number of our selection (or select it using the mouse if 
<code>graphics = TRUE</code>), in this case option <strong>2</strong>.</p>

<h3>Submenu for the given datatype</h3>

<pre><code>## Wind
## 
## 1: Surface wind
## 2: Max Gust
</code></pre>

<p>The next menu prompts us for the type of wind we are interested in, in this case
we are interested in surface wind which is option <strong>1</strong>.</p>

<h3>Options for the given datatype</h3>

<pre><code>## Surface wind options
## 
## 1: WindRun
## 2: HlyWind
## 3: 3HlyWind
## 4: 9amWind
</code></pre>

<p>The next menu is the options for the chosen datatype, for which we may choose 
more than one. If more than one option for a given datatype is sought, options 
must be chosen one at a time. This is made possible by a menu prompting whether 
or not we would like to select another datatype everytime an option is chosen.</p>

<pre><code>## Choose another option?
## 
## 1: yes
## 2: no
</code></pre>

<p>We are interested only in the surface wind at 9am in this example therefore we 
don&#39;t choose another option after we choose option <strong>4</strong>.</p>

<h3>Final options</h3>

<pre><code>## Units
## 
## 1: m/s
## 2: km/hr
## 3: knots
</code></pre>

<p>This final options menu is typically associated with the units of the datatype 
(although not always) and is sometimes not necessary, depending on the datatype.
For this example we do have a final menu and it prompts us for the units that 
we are interested in where we choose option <strong>3</strong>.</p>

<p>The surface wind datatype and the associated options are now saved in R as an
object called <code>surfaceWind.dt</code>.</p>

<pre><code class="r">surfaceWind.dt
</code></pre>

<pre><code>##     dt.name      dt.type dt.options dt.combo
## dt1    Wind Surface wind  [9amWind]    knots
</code></pre>

<h1>Choosing a datatype without the menus</h1>

<p>The bold numbers in the minimal example above are emphasised specifically to 
show the menu order and selections needed to choose the strength of the 9am 
surface wind in knots datatype, i.e. <strong>2</strong> &ndash;&gt; <strong>1</strong> &ndash;&gt; <strong>4</strong> &ndash;&gt; <strong>3</strong>. In 
genreal, if we know the selections needed for each of the four menus then we can 
choose any datatype without using the menus making datatype selection 
a lot faster and a much less tedious.</p>

<h2>A minimal example</h2>

<p>To repeat our minimal example without the use of the menus we would just pass 
them as arguments to the <code>cf_datatype</code> function. These arguments are the 
selections of each of the four menus (in order) separated by a comma.</p>

<pre><code class="r">surfaceWind.dt = cf_datatype(2, 1, 4, 3)
surfaceWind.dt
</code></pre>

<pre><code>##     dt.name      dt.type dt.options dt.combo
## dt1    Wind Surface wind  [9amWind]    knots
</code></pre>

<h2>Selecting more than one option for a given datatype</h2>

<p>Recall that we may choose more than one option at the third menu, equivalent to
the check boxes on the cliflo 
<a href="http://cliflo.niwa.co.nz/pls/niwp/wgenf.genform1">database query form</a>. Using 
the menu to choose more than one option is an iterative process however we can
just update our third function argument to deal with this in a more 
time-efficient manner.</p>

<pre><code class="r">surfaceWind.dt = cf_datatype(2, 1, c(2, 4), 3)
surfaceWind.dt
</code></pre>

<pre><code>##     dt.name      dt.type        dt.options dt.combo
## dt1    Wind Surface wind [HlyWind,9amWind]    knots
</code></pre>

<p><code>surfaceWind.dt</code> now contains the surface wind datatype (in knots) with both 
9am wind and hourly wind. Notice how all the other function arguments remain the
same.</p>

<h1>Selecting multiple datatypes</h1>

<p>Most applications involving the environmental data contained within the National
Climate Database will require selection of more than one option for more than 
one datatype. This is where the true advantages in using the <code>clifro</code> package 
become apparent.</p>

<h2>An extended example</h2>

<p>Let us consider an application where we are now interested in hourly and 9am 
surface wind along with hourly and daily rainfall, hourly counts of lightning 
flashes and daily and hourly grass temperature extremes.</p>

<p>There are a few ways to choose all of these datatypes. Firstly, you could go 
through the menu options one by one, selecting the corresponding datatypes and 
options and saving the resulting datatypes as different R objects. A less 
laborious alternative is to create each of these datatypes without the menus.
This does of course assume we know the selections at each branch of the
<a href="http://cliflo.niwa.co.nz/pls/niwp/wgenf.choose_datatype?cat=cat1">datatype selection menus</a>.</p>

<pre><code class="r"># Hourly and 9am surface wind (knots)
surfaceWind.dt = cf_datatype(2, 1, c(2, 4), 3)
surfaceWind.dt
</code></pre>

<pre><code>##     dt.name      dt.type        dt.options dt.combo
## dt1    Wind Surface wind [HlyWind,9amWind]    knots
</code></pre>

<pre><code class="r"># Hourly and daily rainfall
rainfall.dt = cf_datatype(3, 1, c(1, 2))
rainfall.dt
</code></pre>

<pre><code>##           dt.name              dt.type      dt.options dt.combo
## dt1 Precipitation Rain (fixed periods) [Daily ,Hourly]
</code></pre>

<pre><code class="r"># Hourly counts of lightning flashes
lightning.dt = cf_datatype(6, 1, 1)
lightning.dt
</code></pre>

<pre><code>##     dt.name   dt.type dt.options dt.combo
## dt1 Weather Lightning     [Ltng]
</code></pre>

<pre><code class="r"># Daily and hourly grass temperature extremes
temperatureExtremes.dt = cf_datatype(4, 2, c(5, 6))
temperatureExtremes.dt

# Note: only the surface wind datatype requires combo options
</code></pre>

<pre><code>##                      dt.name      dt.type          dt.options dt.combo
## dt1 Temperature and Humidity Max_min_temp [DlyGrass,HlyGrass]
</code></pre>

<p>This results in 4 separate objects in R containing the datatypes and their 
corresponding options. If we were wanting to submit a query using all of these 
datatypes at once, having four separate datatypes is less than optimal. The 
following table shows the options for each of the menus that we are interested
in. </p>

<table><thead>
<tr>
<th>Menu</th>
<th>Surface wind</th>
<th>Rainfall</th>
<th>Lightning</th>
<th>Temperature</th>
</tr>
</thead><tbody>
<tr>
<td>First selection</td>
<td>2</td>
<td>3</td>
<td>6</td>
<td>4</td>
</tr>
<tr>
<td>Second selection</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Third selection(s)</td>
<td>2 &amp; 4</td>
<td>1 &amp; 2</td>
<td>1</td>
<td>5 &amp; 6</td>
</tr>
<tr>
<td>combo box options</td>
<td>3</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
</tr>
</tbody></table>

<p>We can read across the columns to see the selections that are needed to return
an R object containing the datatypes we are interested in. We can then just pass
these values into the <code>cf_datatype</code> function to return a single R object 
containing all of our datatypes and options.</p>

<pre><code class="r">query1.dt = cf_datatype(c(2, 3, 6, 4), 
                        c(1, 1, 1, 2),
                        list(c(2, 4), c(1, 2), 1, c(5, 6)),
                        c(3, NA, NA, NA))
query1.dt
</code></pre>

<pre><code>##                      dt.name              dt.type          dt.options
## dt1                     Wind         Surface wind   [HlyWind,9amWind]
## dt2            Precipitation Rain (fixed periods)     [Daily ,Hourly]
## dt3                  Weather            Lightning              [Ltng]
## dt4 Temperature and Humidity         Max_min_temp [DlyGrass,HlyGrass]
##     dt.combo
## dt1    knots
## dt2         
## dt3         
## dt4
</code></pre>

<p>We can also easily combine separate <code>cfDatatype</code> objects in R using the addition 
symbol <code>+</code>, to produce an identical result. This may be useful when you want 
to conduct multiple queries which include a subset of these datatypes.</p>

<pre><code class="r">query1.dt = surfaceWind.dt + rainfall.dt + lightning.dt + 
  temperatureExtremes.dt
query1.dt
</code></pre>

<pre><code>##                      dt.name              dt.type          dt.options
## dt1                     Wind         Surface wind   [HlyWind,9amWind]
## dt2            Precipitation Rain (fixed periods)     [Daily ,Hourly]
## dt3                  Weather            Lightning              [Ltng]
## dt4 Temperature and Humidity         Max_min_temp [DlyGrass,HlyGrass]
##     dt.combo
## dt1    knots
## dt2         
## dt3         
## dt4
</code></pre>

<h2>Extras</h2>

<pre><code class="r"># To add another datatype using the menu:
query1.dt + cf_datatype()

# Is equivalent to:
query1.dt + cf_datatype(NA, NA, NA, NA)

# Therefore is equivalent to adding a column of NA&#39;s to the above table:
query1.dt = cf_datatype(c(2, 3, 6, 4, NA), 
                              c(1, 1, 1, 2, NA),
                              list(c(2, 4), c(1, 2), 1, c(5, 6), NA),
                              c(3, NA, NA, NA, NA))

# Half an unknown wind datatype i.e. we know first selection = 2 but nothing 
# further:
rain.dt = cf_datatype(2) # 0r cf_datatype(2, NA, NA, NA)
</code></pre>

</body>

</html>
